<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0F172A">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Twitter Bot - Web Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-robot"></i> Membit x Gemini</h1>
                <p>Powered by Membit API & Google Gemini AI</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-warning" onclick="openGuide()">
                    <i class="fas fa-book"></i> Guide
                </button>
                <button class="btn btn-secondary" onclick="openSettings()">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Control Panel -->
            <div class="card control-panel">
                <div class="control-panel-header">
                    <h2><i class="fas fa-gamepad"></i> Control Panel</h2>
                    <div class="status-indicator" id="statusIndicator">
                        <span class="status-dot"></span>
                        <span class="status-text">Stopped</span>
                    </div>
                </div>
                <div class="button-group">
                    <button class="btn btn-success" id="startBtn" onclick="startBot()" disabled
                        title="Configure API keys in Settings first">
                        <i class="fas fa-play"></i> Start Bot
                    </button>
                    <button class="btn btn-danger" id="stopBtn" onclick="stopBot()" disabled>
                        <i class="fas fa-stop"></i> Stop Bot
                    </button>
                    <button class="btn btn-primary" id="runOnceBtn" onclick="runOnce()" disabled
                        title="Configure API keys in Settings first">
                        <i class="fas fa-forward"></i> Run Once
                    </button>
                </div>
            </div>

            <!-- Statistics -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                    <div class="stat-content">
                        <h3 id="successCount">0</h3>
                        <p>Successful Tweets</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon error"><i class="fas fa-exclamation-circle"></i></div>
                    <div class="stat-content">
                        <h3 id="errorCount">0</h3>
                        <p>Errors</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon info"><i class="fas fa-hashtag"></i></div>
                    <div class="stat-content">
                        <h3 id="totalTweets">0</h3>
                        <p>Total Tweets</p>
                    </div>
                </div>
            </div>

            <!-- Quick Config Display -->
            <div class="card config-display">
                <h2><i class="fas fa-info-circle"></i> Current Configuration</h2>
                <div class="config-grid">
                    <div class="config-item">
                        <i class="fas fa-clock"></i>
                        <span>Schedule:</span>
                        <strong id="displaySchedule">6</strong> hours
                    </div>
                    <div class="config-item">
                        <i class="fas fa-redo"></i>
                        <span>Max Retries:</span>
                        <strong id="displayRetries">3</strong>
                    </div>
                    <div class="config-item">
                        <i class="fas fa-ruler"></i>
                        <span>Max Length:</span>
                        <strong id="displayLength">250</strong> chars
                    </div>
                </div>
            </div>

            <!-- Last Tweet -->
            <div class="card last-tweet" id="lastTweetCard" style="display: none;">
                <h2>
                    <svg viewBox="0 0 24 24" width="20" height="20"
                        style="display: inline-block; vertical-align: middle; margin-right: 8px; fill: currentColor;">
                        <path
                            d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                    </svg>
                    Last Tweet
                </h2>
                <div class="tweet-content">
                    <p id="lastTweetText"></p>
                    <div class="tweet-meta">
                        <span id="lastTweetTime"></span>
                        <a id="lastTweetLink" href="#" target="_blank" class="btn btn-sm btn-primary">
                            <i class="fas fa-external-link-alt"></i> View on Twitter
                        </a>
                    </div>
                </div>
            </div>

            <!-- Logs -->
            <div class="card logs-panel">
                <h2><i class="fas fa-terminal"></i> Activity Logs</h2>
                <div class="logs-container" id="logsContainer">
                    <div class="log-entry info">
                        <span class="log-time">--:--:--</span>
                        <span class="log-message">Waiting for connection...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> Bot Settings</h2>
                <button class="close-btn" onclick="closeSettings()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="modal-body">
                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('api')">
                        <i class="fas fa-key"></i> API Keys
                    </button>
                    <button class="tab-btn" onclick="switchTab('config')">
                        <i class="fas fa-sliders-h"></i> Configuration
                    </button>
                    <button class="tab-btn" onclick="switchTab('prompt')">
                        <i class="fas fa-edit"></i> Prompt
                    </button>
                </div>

                <!-- API Keys Tab -->
                <div id="apiTab" class="tab-content active">
                    <div class="form-group">
                        <label><i class="fas fa-database"></i> Membit API Key:</label>
                        <input type="password" id="membitKey" placeholder="Enter Membit API Key" autocomplete="off">
                        <button class="toggle-password" onclick="togglePassword('membitKey')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-brain"></i> Gemini API Key:</label>
                        <input type="password" id="geminiKey" placeholder="Enter Gemini API Key">
                        <button class="toggle-password" onclick="togglePassword('geminiKey')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-group">
                        <label>
                            <svg viewBox="0 0 24 24" width="16" height="16"
                                style="display: inline-block; vertical-align: middle; margin-right: 5px; fill: currentColor;">
                                <path
                                    d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                            </svg>
                            Twitter API Key:
                        </label>
                        <input type="password" id="twitterKey" placeholder="Enter Twitter API Key" autocomplete="off">
                        <button class="toggle-password" onclick="togglePassword('twitterKey')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-group">
                        <label>
                            <svg viewBox="0 0 24 24" width="16" height="16"
                                style="display: inline-block; vertical-align: middle; margin-right: 5px; fill: currentColor;">
                                <path
                                    d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                            </svg>
                            Twitter API Secret:
                        </label>
                        <input type="password" id="twitterSecret" placeholder="Enter Twitter API Secret"
                            autocomplete="off">
                        <button class="toggle-password" onclick="togglePassword('twitterSecret')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-group">
                        <label>
                            <svg viewBox="0 0 24 24" width="16" height="16"
                                style="display: inline-block; vertical-align: middle; margin-right: 5px; fill: currentColor;">
                                <path
                                    d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                            </svg>
                            Twitter Access Token:
                        </label>
                        <input type="password" id="twitterToken" placeholder="Enter Twitter Access Token"
                            autocomplete="off">
                        <button class="toggle-password" onclick="togglePassword('twitterToken')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-group">
                        <label>
                            <svg viewBox="0 0 24 24" width="16" height="16"
                                style="display: inline-block; vertical-align: middle; margin-right: 5px; fill: currentColor;">
                                <path
                                    d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                            </svg>
                            Twitter Access Secret:
                        </label>
                        <input type="password" id="twitterAccessSecret" placeholder="Enter Twitter Access Secret"
                            autocomplete="off">
                        <button class="toggle-password" onclick="togglePassword('twitterAccessSecret')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <!-- Configuration Tab -->
                <div id="configTab" class="tab-content">
                    <div class="form-group">
                        <label><i class="fas fa-clock"></i> Schedule (hours):</label>
                        <input type="number" id="scheduleHours" min="1" max="24" value="6">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-redo"></i> Max Retries:</label>
                        <input type="number" id="maxRetries" min="1" max="10" value="3">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-ruler"></i> Max Tweet Length:</label>
                        <input type="number" id="maxLength" min="100" max="280" value="250">
                    </div>
                </div>

                <!-- Prompt Tab -->
                <div id="promptTab" class="tab-content">
                    <div class="form-group">
                        <label><i class="fas fa-edit"></i> Tweet Prompt Template:</label>
                        <textarea id="promptTemplate" rows="14" spellcheck="false"></textarea>
                        <div class="prompt-help">
                            <p><strong>‚ö†Ô∏è IMPORTANT - Must use these variables:</strong></p>
                            <ul>
                                <li>
                                    <code class="copyable-code" onclick="copyToClipboard('{trending_data}', this)">
                                        {trending_data}
                                        <i class="fas fa-copy copy-icon"></i>
                                    </code>
                                    - Trend data from Membit (REQUIRED)
                                </li>
                                <li>
                                    <code class="copyable-code" onclick="copyToClipboard('{max_tweet_length}', this)">
                                        {max_tweet_length}
                                        <i class="fas fa-copy copy-icon"></i>
                                    </code>
                                    - Maximum tweet length (REQUIRED)
                                </li>
                            </ul>
                            <p style="margin-top: 10px;"><strong>Tips for creating good prompts:</strong></p>
                            <ul>
                                <li>‚úÖ Clearly state MAXIMUM characters</li>
                                <li>‚úÖ Request output ONLY tweet, without introduction</li>
                                <li>‚úÖ Be specific about format and style</li>
                                <li>‚úÖ Add examples if needed</li>
                                <li>‚ùå Don't be too short or ambiguous</li>
                            </ul>
                            <p style="margin-top: 10px;"><strong>Example of good prompt:</strong></p>
                            <code
                                style="display: block; padding: 10px; background: rgba(29, 161, 242, 0.1); border-radius: 5px; margin-top: 5px; white-space: pre-wrap;">You are an expert social media manager. Your task is to view trend data from Membit 

View data: {trending_data}

Create tweet MAXIMUM {max_tweet_length} characters about oracle sector.
- Short and engaging
- ONLY tweet, without introduction
- Add #Oracle at the end</code>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeSettings()">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn btn-success" onclick="saveAllSettings()">
                    <i class="fas fa-save"></i> Save All Settings
                </button>
            </div>
        </div>
    </div>

    <!-- Guide Modal -->
    <div id="guideModal" class="modal">
        <div class="modal-content guide-modal">
            <div class="modal-header">
                <h2><i class="fas fa-book"></i> Complete Guide</h2>
                <button class="close-btn" onclick="closeGuide()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Guide Tabs -->
            <div class="tabs">
                <button class="tab-btn active" onclick="switchGuideTab('usage')">
                    <i class="fas fa-cog"></i> How to Use
                </button>
                <button class="tab-btn" onclick="switchGuideTab('ratelimits')">
                    <i class="fas fa-exclamation-triangle"></i> Rate Limits
                </button>
            </div>

            <div class="modal-body guide-content">
                <!-- Rate Limits Tab -->
                <div id="ratelimitsGuide" class="guide-tab-content">
                    <div class="markdown-body">
                        <h2>‚ö†Ô∏è Twitter API Rate Limits Guide</h2>

                        <h3>What is Rate Limit?</h3>
                        <p>Rate limit is a restriction on the number of tweets that can be posted within a certain time period.
                            Twitter enforces this to prevent spam and API abuse.</p>

                        <h3>üìä Twitter API Free Tier Limits</h3>

                        <h4>Daily Limit</h4>
                        <ul>
                            <li><strong>50 tweets per 24 hours</strong></li>
                        </ul>

                        <h4>Monthly Limit</h4>
                        <ul>
                            <li><strong>1,500 tweets per month</strong></li>
                        </ul>

                        <h4>Reset Time</h4>
                        <ul>
                            <li>Rate limit will reset every <strong>15 minutes</strong></li>
                            <li>If you hit the limit, wait 15 minutes before trying again</li>
                        </ul>

                        <h3>üö® Error 429 - Too Many Requests</h3>

                        <h4>What Does It Mean?</h4>
                        <p>This error appears when you have reached the maximum posting limit within a certain time
                            period.</p>

                        <h4>Common Causes:</h4>
                        <ul>
                            <li>‚ùå Posting too frequently (interval &lt; 3 hours)</li>
                            <li>‚ùå Spamming "Run Once" button for testing</li>
                            <li>‚ùå Bot retrying multiple times on error</li>
                            <li>‚ùå Combination of bot + manual tweets exceeding 50/day</li>
                        </ul>

                        <h4>Consequences:</h4>
                        <ul>
                            <li>‚ö†Ô∏è Requests rejected until rate limit resets</li>
                            <li>‚ö†Ô∏è If you continue spamming, account can be suspended</li>
                            <li>‚ö†Ô∏è API access can be temporarily revoked</li>
                        </ul>

                        <h3>‚úÖ How to Avoid Rate Limit</h3>

                        <h4>1. Set Safe Schedule</h4>
                        <p><strong>Recommended posting interval:</strong></p>

                        <table class="guide-table">
                            <thead>
                                <tr>
                                    <th>Interval</th>
                                    <th>Tweets/Hari</th>
                                    <th>Tweets/Bulan</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>24 jam</td>
                                    <td>1</td>
                                    <td>30</td>
                                    <td>‚úÖ Very Safe</td>
                                </tr>
                                <tr>
                                    <td>12 hours</td>
                                    <td>2</td>
                                    <td>60</td>
                                    <td>‚úÖ Safe</td>
                                </tr>
                                <tr>
                                    <td>8 hours</td>
                                    <td>3</td>
                                    <td>90</td>
                                    <td>‚úÖ Safe</td>
                                </tr>
                                <tr class="highlight">
                                    <td><strong>6 hours</strong></td>
                                    <td><strong>4</strong></td>
                                    <td><strong>120</strong></td>
                                    <td>‚úÖ <strong>Recommended</strong></td>
                                </tr>
                                <tr>
                                    <td>4 hours</td>
                                    <td>6</td>
                                    <td>180</td>
                                    <td>‚ö†Ô∏è Be Careful</td>
                                </tr>
                                <tr>
                                    <td>2 hours</td>
                                    <td>12</td>
                                    <td>360</td>
                                    <td>‚ùå Risky</td>
                                </tr>
                                <tr>
                                    <td>1 hour</td>
                                    <td>24</td>
                                    <td>720</td>
                                    <td>‚ùå Will hit limit</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="info-box">
                            <strong>Recommended Setting:</strong>
                            <pre><code>SCHEDULE_HOURS=6</code></pre>
                            <p>With this setting:</p>
                            <ul>
                                <li>4 tweets per day</li>
                                <li>120 tweets per month</li>
                                <li>Still have buffer of 930 tweets for manual posting</li>
                                <li>Safe from rate limit</li>
                            </ul>
                        </div>

                        <h4>2. Don't Spam "Run Once"</h4>

                        <div class="warning-box">
                            <p><strong>‚ùå DON'T:</strong></p>
                            <ul>
                                <li>Spam click "Run Once" multiple times</li>
                                <li>Test bot with interval &lt; 15 minutes</li>
                                <li>Manually retry when hitting error 429</li>
                            </ul>
                        </div>

                        <div class="success-box">
                            <p><strong>‚úÖ DO:</strong></p>
                            <ul>
                                <li>Test "Run Once" maximum 2-3x per day</li>
                                <li>Wait at least 15 minutes between tests</li>
                                <li>Use automatic schedule for routine posting</li>
                            </ul>
                        </div>

                        <h4>3. Calculate Total Daily Tweets</h4>

                        <div class="info-box">
                            <p><strong>Formula:</strong></p>
                            <pre><code>Total Tweets/Day = (24 / SCHEDULE_HOURS) + Manual Tweets</code></pre>

                            <p><strong>Example:</strong></p>
                            <ul>
                                <li>Bot: <code>SCHEDULE_HOURS=6</code> ‚Üí 4 tweets/day</li>
                                <li>Manual: 3 tweets/day</li>
                                <li><strong>Total: 7 tweets/day</strong> ‚úÖ (still below 50)</li>
                            </ul>

                            <p><strong>Make sure total does not exceed 50 tweets/day!</strong></p>
                        </div>

                        <h4>4. Monitor Usage</h4>

                        <p><strong>Check in Twitter Developer Portal:</strong></p>
                        <ol>
                            <li>Login to <a href="https://developer.twitter.com/en/portal/dashboard"
                                    target="_blank">https://developer.twitter.com/en/portal/dashboard</a></li>
                            <li>Select your project/app</li>
                            <li>Click "Usage" tab</li>
                            <li>View daily/monthly usage graph</li>
                        </ol>

                        <p><strong>Check in Bot Dashboard:</strong></p>
                        <ul>
                            <li>Total Tweets: View statistics in dashboard</li>
                            <li>Success Count: How many tweets successfully posted</li>
                            <li>Error Count: How many times failed</li>
                        </ul>

                        <h3>üõë What to Do When You Hit Rate Limit?</h3>

                        <div class="steps-box">
                            <h4>Step 1: Stop Bot</h4>
                            <ul>
                                <li><strong>Web Version:</strong> Click "Stop Bot" button</li>
                                <li><strong>Terminal Version:</strong> Press <code>Ctrl+C</code></li>
                            </ul>

                            <h4>Step 2: Wait 15 Minutes</h4>
                            <p>Don't try posting again until rate limit resets (15 minutes).</p>

                            <h4>Step 3: Check Usage</h4>
                            <p>Login to Twitter Developer Portal and check how many tweets have been posted today.</p>

                            <h4>Step 4: Adjust Schedule</h4>
                            <p>If you frequently hit the limit, increase <code>SCHEDULE_HOURS</code>:</p>
                            <ul>
                                <li><strong>Web Version:</strong> Click "Settings" ‚Üí "Configuration" tab ‚Üí Change
                                    "Schedule Hours" to 6 or more ‚Üí Click "Save All Settings"</li>
                                <li><strong>Terminal Version:</strong> Edit <code>.env</code> file ‚Üí Change
                                    <code>SCHEDULE_HOURS=6</code> ‚Üí Save file
                                </li>
                            </ul>

                            <h4>Step 5: Restart Bot</h4>
                            <p>After 15 minutes and adjusting schedule, restart bot.</p>
                        </div>

                        <h3>üí° Tips to Avoid Suspension</h3>

                        <ol>
                            <li><strong>Don't Retry on Error 429</strong><br>If bot hits error 429,
                                <strong>STOP</strong> - don't retry multiple times. This can be considered spam by Twitter.
                            </li>
                            <li><strong>Use Reasonable Interval</strong><br>Posting every 6-8 hours is more natural than
                                every 1-2 hours.</li>
                            <li><strong>Content Variation</strong><br>Make sure tweets are not too repetitive. Bot already
                                uses AI for content variation.</li>
                            <li><strong>Bot + Manual Combination</strong>
                                <ul>
                                    <li>Bot: 4 tweets/day (6 hour schedule)</li>
                                    <li>Manual: Maximum 10-15 tweets/day</li>
                                    <li>Total: 14-19 tweets/day (safe)</li>
                                </ul>
                            </li>
                            <li><strong>Monitor Regularly</strong><br>Check usage daily to ensure not approaching
                                limit.</li>
                        </ol>

                        <h3>üìà Upgrade Options</h3>

                        <p>If 50 tweets/day is not enough:</p>

                        <h4>Basic Tier ($100/month)</h4>
                        <ul>
                            <li>3,000 tweets/month</li>
                            <li>10,000 tweets/month (write)</li>
                            <li>Higher rate limits</li>
                        </ul>

                        <h4>Pro Tier ($5,000/month)</h4>
                        <ul>
                            <li>300,000 tweets/month</li>
                            <li>Much higher rate limits</li>
                            <li>Advanced features</li>
                        </ul>

                        <p><strong>Info:</strong> <a href="https://developer.twitter.com/en/portal/products"
                                target="_blank">https://developer.twitter.com/en/portal/products</a></p>

                        <h3>üéØ Best Practices Summary</h3>

                        <div class="success-box">
                            <p><strong>‚úÖ DO:</strong></p>
                            <ul>
                                <li>Set <code>SCHEDULE_HOURS=6</code> or more</li>
                                <li>Monitor usage in Developer Portal</li>
                                <li>Wait 15 minutes if you hit rate limit</li>
                                <li>Calculate total tweets (bot + manual) per day</li>
                                <li>Stop bot if error 429</li>
                            </ul>
                        </div>

                        <div class="warning-box">
                            <p><strong>‚ùå DON'T:</strong></p>
                            <ul>
                                <li>Spam "Run Once" for testing</li>
                                <li>Set interval &lt; 3 hours</li>
                                <li>Retry multiple times on error 429</li>
                                <li>Post &gt; 50 tweets/day</li>
                                <li>Ignore error messages</li>
                            </ul>
                        </div>

                        <h3>üìö Resources</h3>

                        <ul>
                            <li><a href="https://developer.twitter.com/en/docs/twitter-api" target="_blank">Twitter API
                                    Documentation</a></li>
                            <li><a href="https://developer.twitter.com/en/docs/twitter-api/rate-limits"
                                    target="_blank">Rate Limits Reference</a></li>
                            <li><a href="https://developer.twitter.com/en/portal/dashboard" target="_blank">Developer
                                    Portal</a></li>
                            <li><a href="https://developer.twitter.com/en/portal/products" target="_blank">API
                                    Pricing</a></li>
                        </ul>

                        <div class="info-box" style="margin-top: 30px; text-align: center;">
                            <p><strong>üí° Remember:</strong> Better to post 4 quality tweets per day than spam
                                50 tweets and get suspended!</p>
                            <p><strong>üéØ Recommended Setting:</strong> <code>SCHEDULE_HOURS=6</code> (4 tweets/day =
                                120 tweets/month)</p>
                        </div>
                    </div>
                </div>

                <!-- Usage Guide Tab -->
                <div id="usageGuide" class="guide-tab-content active">
                    <div class="markdown-body">
                        <h2>üöÄ How to Use the Bot</h2>

                        <h3>üìã Initial Setup</h3>

                        <h4>1. Preparing API Keys</h4>
                        <p>Before using the bot, you need to get API keys from 3 services:</p>

                        <div class="steps-box">
                            <h4>A. Membit API Key</h4>
                            <ol>
                                <li>Visit <a href="https://membit.ai/integration"
                                        target="_blank">https://membit.ai/integration</a></li>
                                <li>Login or register new account</li>
                                <li>Generate API key</li>
                                <li>Copy and save API key</li>
                            </ol>

                            <h4>B. Google Gemini API Key</h4>
                            <ol>
                                <li>Visit <a href="https://aistudio.google.com/app/apikey"
                                        target="_blank">https://aistudio.google.com/app/apikey</a></li>
                                <li>Login with Google account</li>
                                <li>Click "Create API Key"</li>
                                <li>Copy and save API key</li>
                            </ol>

                            <h4>C. Twitter API Credentials</h4>
                            <ol>
                                <li>Visit <a href="https://developer.twitter.com/en/portal/dashboard"
                                        target="_blank">Twitter Developer Portal</a></li>
                                <li>Create new project & app</li>
                                <li>Set permissions to "Read and Write"</li>
                                <li>Generate API Key & Secret</li>
                                <li>Generate Access Token & Secret</li>
                                <li>Copy all credentials (4 keys total)</li>
                            </ol>
                            <p><strong>‚ö†Ô∏è Important:</strong> See <a href="https://github.com/Amarudinn/membit-hackathon/blob/main/web-version/TWITTER_SETUP.md" target="_blank">TWITTER_SETUP.md</a> file for detailed
                                Twitter API setup guide.</p>
                        </div>

                        <h4>2. Configure API Keys in Dashboard</h4>

                        <div class="info-box">
                            <p><strong>Steps:</strong></p>
                            <ol>
                                <li>Click <strong>"‚öôÔ∏è Settings"</strong> button in header</li>
                                <li>Make sure <strong>"API Keys"</strong> tab is active</li>
                                <li>Enter all API keys:
                                    <ul>
                                        <li><strong>Membit API Key</strong> - From Membit</li>
                                        <li><strong>Gemini API Key</strong> - From Google AI Studio</li>
                                        <li><strong>Twitter API Key</strong> - Consumer Key</li>
                                        <li><strong>Twitter API Secret</strong> - Consumer Secret</li>
                                        <li><strong>Twitter Access Token</strong> - Access Token</li>
                                        <li><strong>Twitter Access Secret</strong> - Access Token Secret</li>
                                    </ul>
                                </li>
                                <li>Click <strong>"Save All Settings"</strong></li>
                            </ol>
                            <p><strong>‚úÖ Tips:</strong> Use eye icon (üëÅÔ∏è) to show/hide password when inputting.</p>
                        </div>

                        <h3>‚öôÔ∏è Bot Configuration</h3>

                        <h4>1. Schedule Configuration</h4>

                        <p>Set how often the bot posts tweets:</p>

                        <div class="info-box">
                            <p><strong>Setting: Schedule Hours</strong></p>
                            <ul>
                                <li><strong>Value:</strong> 1-24 hours</li>
                                <li><strong>Recommended:</strong> 6 hours (4 tweets/day)</li>
                                <li><strong>Location:</strong> Settings ‚Üí Configuration tab</li>
                            </ul>

                            <p><strong>Example:</strong></p>
                            <ul>
                                <li><code>Schedule Hours = 6</code> ‚Üí Bot posts every 6 hours (4x/day)</li>
                                <li><code>Schedule Hours = 12</code> ‚Üí Bot posts every 12 hours (2x/day)</li>
                                <li><code>Schedule Hours = 24</code> ‚Üí Bot posts every 24 hours (1x/day)</li>
                            </ul>
                        </div>

                        <h4>2. Retry Configuration</h4>

                        <div class="info-box">
                            <p><strong>Setting: Max Retries</strong></p>
                            <ul>
                                <li><strong>Value:</strong> 1-10</li>
                                <li><strong>Recommended:</strong> 3</li>
                                <li><strong>Function:</strong> How many times bot retries if posting fails</li>
                            </ul>

                            <p><strong>‚ö†Ô∏è Note:</strong> If rate limit is hit (error 429), bot will stop retrying automatically.
                            </p>
                        </div>

                        <h4>3. Tweet Length Configuration</h4>

                        <div class="info-box">
                            <p><strong>Setting: Max Tweet Length</strong></p>
                            <ul>
                                <li><strong>Value:</strong> 100-280 characters</li>
                                <li><strong>Recommended:</strong> 250</li>
                                <li><strong>Function:</strong> Maximum length limit for generated tweets</li>
                            </ul>

                            <p><strong>üí° Tips:</strong> Set 250 to provide buffer for hashtags and variation.</p>
                        </div>

                        <h3>‚úèÔ∏è Customize Prompt Template</h3>

                        <p>Prompt template controls how AI (Gemini) creates tweets.</p>

                        <h4>1. Access Prompt Editor</h4>
                        <ol>
                            <li>Click <strong>"‚öôÔ∏è Settings"</strong></li>
                            <li>Select <strong>"Prompt"</strong> tab</li>
                            <li>Edit prompt in textarea</li>
                        </ol>

                        <h4>2. Required Variables</h4>

                        <div class="warning-box">
                            <p><strong>‚ö†Ô∏è MUST use these 2 variables:</strong></p>
                            <ul>
                                <li><code>{trending_data}</code> - Trend data from Membit (REQUIRED)</li>
                                <li><code>{max_tweet_length}</code> - Maximum tweet length (REQUIRED)</li>
                            </ul>
                            <p>If missing, bot will error or generate tweets that are too long!</p>
                        </div>

                        <h4>3. Example Prompt Template</h4>

                        <div class="success-box">
                            <p><strong>‚úÖ Good Prompt:</strong></p>
                            <pre><code>You are an expert social media manager. View trend data:

{trending_data}

Create tweet MAXIMUM {max_tweet_length} characters about Web3.

IMPORTANT:
- Short, concise, engaging
- End with #Web3
- ONLY tweet, without introduction</code></pre>
                        </div>

                        <div class="warning-box">
                            <p><strong>‚ùå Bad Prompt:</strong></p>
                            <pre><code>Create tweet about {trending_data}</code></pre>
                            <p><strong>Problems:</strong></p>
                            <ul>
                                <li>No <code>{max_tweet_length}</code> ‚Üí Tweet can be too long</li>
                                <li>Not specific ‚Üí Inconsistent results</li>
                                <li>No format instructions ‚Üí Output may have introduction</li>
                            </ul>
                        </div>

                        <h4>4. Tips for Creating Effective Prompts</h4>

                        <ul>
                            <li>‚úÖ <strong>Specific:</strong> Explain desired format</li>
                            <li>‚úÖ <strong>Clear limits:</strong> State MAXIMUM characters
                                <code>{max_tweet_length}</code></li>
                            <li>‚úÖ <strong>Output only:</strong> Request ONLY tweet, without introduction</li>
                            <li>‚úÖ <strong>Style guide:</strong> Define tone (formal/casual)</li>
                            <li>‚úÖ <strong>Hashtag:</strong> Specify required hashtags</li>
                            <li>‚ùå <strong>Don't:</strong> Be too short or ambiguous</li>
                        </ul>

                        <h3>üéÆ Operating the Bot</h3>

                        <h4>1. Start Bot (Automatic Mode)</h4>

                        <div class="info-box">
                            <p><strong>Function:</strong> Bot will post automatically according to schedule</p>
                            <ol>
                                <li>Make sure all API keys are configured</li>
                                <li>Click <strong>"‚ñ∂Ô∏è Start Bot"</strong> button</li>
                                <li>Bot will start posting every X hours (according to schedule)</li>
                                <li>Status badge changes to "Running" (green)</li>
                                <li>Dashboard displays "Next Run" time</li>
                            </ol>

                            <p><strong>üí° Tips:</strong> Bot will keep running until stopped or server restarts.</p>
                        </div>

                        <h4>2. Stop Bot</h4>

                        <div class="info-box">
                            <p><strong>Function:</strong> Stop the running bot</p>
                            <ol>
                                <li>Click <strong>"‚èπÔ∏è Stop Bot"</strong> button</li>
                                <li>Bot will stop after current task completes</li>
                                <li>Status badge changes to "Stopped" (red)</li>
                                <li>"Next Run" time is removed</li>
                            </ol>
                        </div>

                        <h4>3. Run Once (Manual Mode)</h4>

                        <div class="info-box">
                            <p><strong>Function:</strong> Post 1 tweet now (for testing)</p>
                            <ol>
                                <li>Click <strong>"‚è© Run Once"</strong> button</li>
                                <li>Bot will generate & post 1 tweet</li>
                                <li>Does not affect schedule</li>
                                <li>Good for testing before starting automatic mode</li>
                            </ol>

                            <p><strong>‚ö†Ô∏è Warning:</strong> Don't spam "Run Once" - can hit rate limit!</p>
                        </div>

                        <h3>üìä Monitoring Bot</h3>

                        <h4>1. Statistics Cards</h4>

                        <p>Dashboard displays 3 important metrics:</p>

                        <table class="guide-table">
                            <thead>
                                <tr>
                                    <th>Metric</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Total Tweets</strong></td>
                                    <td>Total tweets posted (success + error)</td>
                                </tr>
                                <tr>
                                    <td><strong>Success</strong></td>
                                    <td>Number of successfully posted tweets</td>
                                </tr>
                                <tr>
                                    <td><strong>Errors</strong></td>
                                    <td>Number of failed posting attempts</td>
                                </tr>
                            </tbody>
                        </table>

                        <h4>2. Activity Logs</h4>

                        <p>Logs display real-time bot activity with color coding:</p>

                        <ul>
                            <li>üîµ <strong>Info</strong> - General information (blue)</li>
                            <li>‚úÖ <strong>Success</strong> - Successful operation (green)</li>
                            <li>‚ö†Ô∏è <strong>Warning</strong> - Warning (yellow)</li>
                            <li>‚ùå <strong>Error</strong> - Error/failed (red)</li>
                        </ul>

                        <h4>3. Last Tweet Preview</h4>

                        <p>"Last Tweet" card displays:</p>
                        <ul>
                            <li>Last tweet content</li>
                            <li>Posting timestamp</li>
                            <li>Link to tweet on Twitter</li>
                        </ul>

                        <h3>üîß Troubleshooting</h3>

                        <h4>Problem: "Start Bot" Button Disabled</h4>

                        <div class="warning-box">
                            <p><strong>Cause:</strong> API keys not configured yet</p>
                            <p><strong>Solution:</strong></p>
                            <ol>
                                <li>Click "Settings"</li>
                                <li>"API Keys" tab</li>
                                <li>Fill in all API keys</li>
                                <li>Click "Save All Settings"</li>
                                <li>Button will be enabled automatically</li>
                            </ol>
                        </div>

                        <h4>Problem: Error "GEMINI_API_KEY not found"</h4>

                        <div class="warning-box">
                            <p><strong>Cause:</strong> Gemini API key not saved</p>
                            <p><strong>Solution:</strong></p>
                            <ol>
                                <li>Check API key in Google AI Studio</li>
                                <li>Copy API key again</li>
                                <li>Paste in Settings ‚Üí API Keys</li>
                                <li>Save settings</li>
                                <li>Restart bot</li>
                            </ol>
                        </div>

                        <h4>Problem: Tweet Too Long</h4>

                        <div class="warning-box">
                            <p><strong>Cause:</strong> Prompt does not include <code>{max_tweet_length}</code></p>
                            <p><strong>Solution:</strong></p>
                            <ol>
                                <li>Settings ‚Üí Prompt tab</li>
                                <li>Make sure <code>{max_tweet_length}</code> is in prompt</li>
                                <li>Add instruction "MAXIMUM {max_tweet_length} characters"</li>
                                <li>Save settings</li>
                                <li>Test with "Run Once"</li>
                            </ol>
                        </div>

                        <h4>Problem: Error 429 (Rate Limit)</h4>

                        <div class="warning-box">
                            <p><strong>Cause:</strong> Too many posts in 24 hours</p>
                            <p><strong>Solution:</strong></p>
                            <ol>
                                <li>Stop bot</li>
                                <li>Wait 15 minutes</li>
                                <li>Settings ‚Üí Configuration</li>
                                <li>Increase "Schedule Hours" to 6 or more</li>
                                <li>Save settings</li>
                                <li>Restart bot after 15 minutes</li>
                            </ol>
                            <p><strong>üìñ Details:</strong> See "Rate Limits" tab for complete info.</p>
                        </div>

                        <h3>üí° Best Practices</h3>

                        <div class="success-box">
                            <p><strong>‚úÖ DO:</strong></p>
                            <ul>
                                <li>Test with "Run Once" before starting automatic mode</li>
                                <li>Monitor logs regularly to detect issues</li>
                                <li>Set schedule 6 hours or more for safety</li>
                                <li>Backup API keys in safe place</li>
                                <li>Update prompt template to improve quality</li>
                                <li>Check Twitter Developer Portal for usage stats</li>
                            </ul>
                        </div>

                        <div class="warning-box">
                            <p><strong>‚ùå DON'T:</strong></p>
                            <ul>
                                <li>Spam "Run Once" multiple times</li>
                                <li>Set schedule too short (< 3 hours)</li>
                                <li>Share API keys with others</li>
                                <li>Ignore error messages in logs</li>
                                <li>Forget to monitor usage in Twitter Developer Portal</li>
                            </ul>
                        </div>

                        <h3>üìö Additional Resources</h3>

                        <ul>
                            <li><a href="https://github.com/Amarudinn/membit-hackathon/blob/main/web-version/README.md" target="_blank">README.md</a> - Complete project documentation</li>
                            <li><a href="https://developer.twitter.com/en/docs" target="_blank">Twitter API Docs</a> -
                                Official documentation</li>
                            <li><a href="https://ai.google.dev/docs" target="_blank">Gemini API Docs</a> - Gemini
                                documentation</li>
                        </ul>

                        <div class="info-box" style="margin-top: 30px; text-align: center;">
                            <p><strong>üéØ Quick Start Checklist:</strong></p>
                            <ol style="text-align: left;">
                                <li>‚úÖ Get all API keys (Membit, Gemini, Twitter)</li>
                                <li>‚úÖ Configure API keys in Settings</li>
                                <li>‚úÖ Set schedule = 6 hours</li>
                                <li>‚úÖ Review & customize prompt template</li>
                                <li>‚úÖ Test with "Run Once"</li>
                                <li>‚úÖ If successful, click "Start Bot"</li>
                                <li>‚úÖ Monitor logs & statistics</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeGuide()">
                    <i class="fas fa-check"></i> Understand
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>